                             Web订餐管理系统
基于 Web 的订餐管理系统的设计与实现
   网上基于 web 的订餐管理系统设计与实现平台的主要功能包括菜单类别管理、菜单信息管理等，根据客户种类又可以划分成管理员客户和会员客户两种 。
   web 的订餐管理系统采用了vu3开发语言为前台设计， MySQL 的后台设计作为数据库管理系统，idea为开发环境，服务器采用 tomcat ， 是一种基于 Web 技术上开发出的 B/S 结构的网上基于 web 的订餐管理系统设计与实现 。
第 1 章 导论
1.1 选题背景目的和意义
网络的快速发展从根本上更改了世界的 菜单交易 方法，自二十世纪九十年代开始，我国的很多企业就设想可以通过 互联网 来交易菜单。因为当时存在很多的原因，比如 企业的 声誉非常不好进行认证、 互联网 的相关法律法规也不够完善、 物流 相对落后等，阻碍了 互联网 菜单销售的 的 速度 。进入 二十一 世纪以后 ，我国经济有了快速的发展，限制 网上交易的各个 难题 逐一被 解决， 国内各大企业 都 加入到 了 电子商务 的浪潮中来。
根据 零点调查 公司的调查， 今年前三季度，我国电子商务市场 销售 额达 5.6 万亿元，比去年同期增长 2 4 ％ 。其中， 互联网 市场 销售 额近 10 000 亿元，已超过 2012 年 全年 销售总额。 网络 交易 这一 点餐 方式 给 人们 的日常 生活带来 了很多方便，除了交易地点更加便捷，更关键的是改变了人们的点餐 习惯 ，人们已经习惯 上网查看 菜单的 相关信息 ， 成为点餐决策环节 的至关重要的一环。
1.2 课题研究状况和发展趋势
网络讲义与 传统方式 交易比较最突出的优点： 信息量大 ， 与 过去的交易 方式 比较 ， 网络交易 能够提供 大 量 菜单 信息。
网络交易 最突出的 优势 是 ，消费者的交易时间没有 限制 ， 客户群 得以增加，这样就使 企业的核心竞争力 得到提高，无需花费商铺费用，大大节省了投入的费用。
第 2 章 系统分析
2 . 1 系统情况分析
系统从技术的可行性、操作的可行性、经济的可行性进行分析。对软件开发中可能面临的问题做了大概的预测，明确自己的目标。并且本系统采用的架构是mvc模式。 能够清楚明白的把本系统的情况展示出来。
2.2 可行性分析
对所有系统完成设计，都可能受到时间和空间上的制约。所以，在设计每一个项目开始，必须对系统实行可行性分析，这样可以降低项目的危害，降低人力、物力和财力的损耗。
2.2.1 技术可行性
本系统主要采用 idea 和 mysql数据库作为设计工具，采用 Java 作为开发语言，主要使用了 J2EE 的技术， java 是一种面向对象的程语言，学习起来非常容易并且使用便利。
本系统从整体上看设计起来比较容易，本系统开发的重点就是对数据库的设计和操作。
2.2.2法律可行性
此网上基于 web 的订餐管理系统设计与实现是自己设计的管理系统，具有很大的实际意义。在法律上完全具有可行性。
总而言之，设计一个网上基于 web 的订餐管理系统设计与实现具有效率高，操作简便，降低成本等优点，所以，建立一个网上基于 web 的订餐管理系统设计与实现是非常必要的。
综上所述，开发一个网上基于 web 的订餐管理系统设计与实现是必要可行的。
2.3 . 系统需求分析
（ 1 ）  采用 B/S 模式完成设计，其好处是后台与前台层次运行时比较清晰，并且和大部分用户的网页搜索方式相适宜。
（ 2 ）   系统界面简单方便。设计 容易 的系统界面， 可以使 用户 比 较快的 对 系统的 控制进行适应 。
2.3.1 性能需求
普通用户只能在线查询信息，例如，对菜单信息进行查询、在线点餐西餐厅菜单、下订单等功能。
（ 1 ）所有记录信息要保持全面，信息记录内容不可以是空
（ 2 ）各种数据间相互联系要保持正确
2.3.2 界面需求
JSP 技术是 将 JAVA 语言作为脚本语言的 ， JSP 网页 给 整个服务器端的 JAVA 库单元提供了一个接口 用 来服务 HTTP 的应用程序。
系统开发的过程与实施过程相反，并不是从输入设计到输出设计，而是从输出设计到输入设计。
2.4 系统数据流程分析
本系统的流程，本系统主要分前台功能模块和后台功能模块两个模块所构成，前台是普通用户模块，普通数据模块又分商品信息浏览，在线下订单，在线注册会员，购物车管理，我的订单管理，后台是管理员用户模块，具体分为以下几个模块，用户注册信息，修改个人密码，商品类别管理，商品信息管理，会员信息管理，订单信息管理，具体的系统流程图如图 2.1 所示 。

图 2.1 系统流程图
本系统的用户通过输入自己的账号密码信息进行登录，根据登录的账号密码比对数据库内的数据来判断登录的账号所具有的权限，管理员拥有所有的权限，能够进行销售和数据管理等所有工作，还可以控制下属账号的权限。工作人员根据登录账号的类别不同具有不同的权限，分为送单员和接单员两种。两种 不同的用户的权限等级不同，拥有不同的操作权限，只能够在系统中看到自己能够进行操作的模块而不能够看到 自己 权限 以外 的模块内容。 要进行别的账号才能进行的操作活动时，需要退出当前登录的账号，重新登录新的账号来 进行操作 ,系统流程如图 2.2 所示。

图 2.2 用户注册流程图
第 3 章 系统技术与理论介绍
3.1   系统模式选择
整个系统采用 B/S 的模式开发， B/S 模式就是浏览器加服务器的结构，在这种结构下，用户的工作界面在浏览器中实现，主要事物逻辑在服务器端实现，还有的事物逻辑在前端实现.
第 4 章 系统设计
4.1  系统设计目标与原则
随着科技的进步和发展，人力管理不再适合当前时代的发展潮流，越来越繁杂的工作使人力管理不仅速度缓慢且容易出错，使用机器管理来代替人力管理符合时代发展的方向。本系统设计目标是以计算机取代繁杂的人工管理，以此来订餐的工作效率，减少人力管理造成出错导致的经济损失以此创造更多的经济效益。
系统功能设计本着降低成本，并且从用户角度出发的原则，根据实际需要，主要要求实用、易学，不仅需要满足订餐系统所主要需要进行的下单，菜品管理，以及考虑订餐人员工能力较低。系统应该学习简单操作方便。并且要符合用户所提出的对于系统的合理需求。系统设计在不违反系统整体性的基础上，应做到可以根据用户的需求进行二次开发，不断完善系统功能，便于系统的不断升级,最终达到完美。
4.2  系统 设计概要
本系统为网上订餐设计，使用者为订餐系统的的工作人员，其中工作人员分为拥有最高权限的订餐管理员以及下属的实际进行接单、下单、送单工作的工作人员。管理员具有最高的权限，能够使用本系统的所有功能，同时可以对下属的工作人员的账号进行管理。工作人员则根据实际的职责分为接单员和送单员两种。接单员负责菜品的采购、接单和订单的管理，送单员主要负责菜品的接送，二者各司其职。不同的工作人员拥有不同的操作权限，并且只能进行自己权限范围内的操作，并且不能够越权限进行其他功能的操作。
4.3  系统功能模块划分
网上订餐管理系统主要应该具备的功能为系统的管理、销售方面（包括销售、客户信息等）的管理以及采购（包括菜品种类数量价格的管理以及购买和入库）的管理三大方面。根据网上订餐可能的需求，将本管理系统细分为：系统管理模块、客户管理模操作员管理模块、采购管理模块、菜品类管理模块其中系统管理模块和操作员管理模块主要为使用人员的部分，作用为添加工作人员账号以及密码的修改。销售管理和客户管理主要为销售方面的功能，剩余的采购管理、菜品管理等等如图 4.1 所示。

图 4.1 系统功能需求分析
第 5 章  数据库设计
5. 1  数据库 设计
  数据库采用成本低，安全性较高，操作较为简单的同时支持多个版本的 Windows 系统的 MySql。数据库包含的数据表一共有 5 个，分别是：管理员信息表 (administrators) 、分类 信息表 (ltypes) 、订单条目信息表 (   The order entry ) 、 订单信息表 ( cg_info) 、 菜单信息表 (   menu )  
5.2  数据库逻辑设计
概念模型设计的典型方法是用 E-R 图方法， E-R 图也即实体 - 联系图 (Entity Relationship Diagram) ,其中包含的属性有：用户名、菜单、订单管理、管理员。用户这个实体有复数的存在，通过登录账号的等级判断是后台管理员还是一般用户。各不同身份都有复数的存在。管理员包含有管理员 IP 和管理员密码两个实体。同时管理员还包括管理菜系，管理菜单名。菜单包含的属性有：所有分类、原价、菜单名、热销价、销量、热点推荐。用户包含的属性有用户名、用户密码、姓名、地址、手机、 QQ 、 EMAIL 。 最后用户管理菜单、订单,网上订餐管理系统 E-R 图如图 5.1 所示 。

图 5.1   数据库逻辑结构设计图
5.4  数据库表 设计
 该系统总共使用了 5 张数据表，包含系统的用户和数据库的主要菜品相关的各类信息，具体的数据库的表的字段名称、数据类型和说明在接下来的数据表结构，画三线图介绍 
 （1）管理员信息表： 本表的内容是在 系统内 添加新的账户的内容，关系 到添加的账户的各类信息， 表内包含的内容有：用户名、注册时间、邮箱、密码、联系方式、 QQ 、用户权限、 主键为用户名，其中注册时间并非账号必须所以可以不填。身份等级即为账号的权限， 如表 5.1 所示。
表 5.1   管理员信息表 (administrators)
Table 5.1 Administrator information table(administrators)
字段名称
数据类型
主键
非空
字段说明
username
Varchar(255)
yes
yes
用户名
createtime
datetime
yes
no
注册时间
email
Varchar(255)
yes
yes
邮箱
password
Varchar(255)
yes
yes
密码
phone
Varchar(255)
yes
yes
联系方式
qq
Varchar(255)
yes
yes
QQ
role
Int(11)
no
no
用户权限 





（ 2 ） 分类信息表：本表的内容是分类单据打印的内容，即分类菜品的相关信息，内包含的内容有：主键、删除、分类名，其中记录分类名为本表的主键。本表的信息全部必要所以不允许有空。如表 5.2 所示。
表 5.2 分类信息表 (ltypes)
Table 5.2  classify  information table(ltypes)
字段名称
数据类型
主键
非空
字段说明
id
Bigint(20)
no
no
主键
catelock
Int(11)
no
no
删除
catename
Varchar(255)
yes
no
分类名
address
Varchar(255)
yes
yes
地址
productname
Varchar(255)
yes
yes
菜单名





（ 3 ） 菜单条目表：本表的内容是订单管理的订单信息，即菜品名、单价、数量。表内包含的内容有：主键、单价、关联的菜单 ID 、 菜单名、数量、关联的订单 ID 、其中订单为本表的主键。本表的信息全部必要所以不允许有空，如表 5.3 所示。
表 5.3 订单条目表 (   The order entry )
Table 5.3    The order entry  information table(ltypes)
字段名称
数据类型
主键
非空
字段说明
id
Bigint(20)
no
no
主键
price
double
yes
yes
单价
productid
Int(11)
no
yes
关联的菜单 ID ， 外键
productname
Varchar(255)
yes
yes
菜单名
productnum
Int(11)
no
no
数量





 
（ 4 ） 订单 信息表：本表的内容是在采购时记录 订单的下单 信息。表内包含的内容有： 主键、送货地址、添加时间、订单号、联系电话、订单状态、总价格、订单的用户名。 其中 联系电话 为本表的主键。本表的信息全部必要所以不允许有空 ， 如表5 .4 所示。
表 5.4   订单信息表 (cg_info)
Table 5.4 indengt information table (cg_info)
字段名称
数据类型
主键
非空
字段说明
id
Bigint(20)
no
no
主键
address
Varchar(255)
yes
yes
送货地址
createtime
datetime
yes
yes
添加时间
orderid
Varchar(255)
yes
no
订单号
phone
Varchar(255)
yes
yes
联系电话
status
Int(11)
no
no
订单状态
totalprice
double
yes
yes
总价格
username
Varchar(255)
yes
yes
订单的用户





（5）菜单信息表：本表的内容是在系统类的菜单的各类信息，主要用于菜单的管理和查询。表内包含的内容有：添加时间、图片路径、简介、菜单名、是否推荐、原价、热销价、商品是否删除的标志、销量、外建等等。其中订单 ID 为本表的主键。本表的信息全部必要所以不允许有空,如表 5.5 所示。
表 5.5 菜单信息表 (   menu )
Table 5.5    menu  information table(ltypes)
字段名称
数据类型
主键
非空
字段说明
id
Bigint(20)
no
no
主键
createtime
datetime
yes
yes
添加时间
imgpath
Varchar(255)
yes
yes
图片路径
Info5
Varchar(255)
yes
yes
简介
name
Varchar(255)
yes
no
菜单名
newstuijian
Int(11)
no
yes
是否推荐
Price1
double
yes
yes
原价
Price2
double
yes
yes
热销价
productlock
Int(11)
no
yes
商品是否删除
xiaoliang
Int(11)
no
no
销量
cateid
Bigint(20)
yes
yes
关联的分类 ID ，





第 6 章 系统实现
开发一个 MIS 的过程中，必须要通过需求分析、系统的设计、再后来就是进行代码实施阶段。 在需求分析和系统设计过程中，主要是把需求转换为数学模型，或者程序模型，用计算机的方式把信息描述出来，最后通过计算机语言，来实现，来完成 MIS 系统的设计。 本章主要具体介绍各模块的界面以及各模块所实现的功能，同时展示 模块内的 部分 重要内容的 实现代码 。 本零售药店管理系统一共分为：系统管理模块、操作员管理模块、客户管理模块、采购管理模块、菜品管理模块。
6.1 后台登陆页面
( 1 ) 描述： 系统必须有安全性验证，本系统通过输入登录名和权限密码，使用 ajax 方式，提交到后台 servlet 进行验证，异步权限验证，来实现系统的安全性验证，如果输入正确，就能登陆到管理系统。
( 2 ) 程序运行效果图如图 6 .1 所示 。

图 6 .1  管理员登陆页面设计
Fig 6.1 the administrator login page design

6.2 系统管理模块
( 1 )   描述： 主页面为管理员 ： 本系统展示了 管理员可操作的 相关 功能，进入 几大 管理页面可以链接到子菜单，每个管理模块下面都有 对应的 子菜单。
( 2 )  程序运行效果图如图 6 .2 所示。

图 6 .2 管理员主页面
Fig 6.2 the administrator home page
在 这个系统中的 每个 jsp 页面将会对 与此有关的 用户进行拦截操作，这样可以提高安全性，防止用户不经过登陆页面而进入任何子菜单页面：
if(session.getAttribute("user")==null)
{
 out.print("<script>alert(' 请先登录！ ');window.open('../index.jsp','_self')</script>");  
}
6.2.1 菜单类别管理
( 1 )类别信息录入
描述：管理员输入各种相关正确信息后点击录入按钮，如果是没有输入完整的用户信息，比如没有输入类别名称，都会立马给出错误提示，不能成功录入。输入数据都通过 form 表单中定义的方法 onsubmit="return checkForm()" 来检查， checkForm() 函数中是各种的校验输入数据的方式。程序效果图如下图 6. 3 所示 。

图 6.3 类别信息录入
Fig 6. 3  category information input
(2) 类别信息管理
描述：管理员点击菜单 的 "菜单类别管理"，页面 直接回 跳转到类别管理界面，调用后台的 action 类查询所有菜单类别信息 , 程序效果图如下图 6.4 所示

图 6.4 菜单类别管理
Figure 6.4 menu category management
类别管理关键代码：
6.2.2 菜单信息管理
(1) 菜单信息录入
描述：在此页面主要是输入菜单信息，包括菜单名称、菜单介绍、菜单图片、菜单价格等，其中菜单介绍这个地方，使用的是开源的在线文本编辑器 fckEditor 这个富文本框实现。是否为空也是通过 form 表单中的 onsubmit="return checkForm() 来检查。
程序效果图如图 6. 5 所示 。

图 6. 5  菜单信息录入
Fig 6.5 menu information input
(2) 菜单信息管理
描述：管理员点击菜单 的 "菜单管理"，页面 立马转到 菜单管理界面，调用后台的菜单 Action 类查询出所有的 相关 菜单信息程序 , 效果图如下图 6. 5 所示 。

图 6. 6   菜单信息管理页面
Figure 6. 6  menu information management page

6.2.3 会员信息管理
(1) 会员信息管理
描述： 订餐用户 访问该站点的时候，可以注册成为会员，管理员登陆后可以管理会员信息，点击"会员管理"，页面调转中后台的是 java 类 userAction ， 读取数据库中，提取会员的信息，绑定到 request 对象，再输出到相应的 jsp 显示页面页面。 即可出现 程序 , 效果图如图 6. 7 所示 。

图 6. 7 会员信息管理
Fig 6.7 members of information management
6.2.4 订单信息管理
(1) 查询订单信息
描述： 管理员通过点击导航栏的"订单管理"，页面跳转到订单管理界面，通过调用后台控制器，来完成订单的查询管理，把对象集，封装到 List 中，通过 Request 对象，返回到前台 jsp 页面中进行显示订单信息 程序 , 效果图如图 6. 8 所示 。

图 6. 8 查询订单信息
Fig 6.8 query order information
(2 ) 订单受理
描述：点击 没有处理的 订单信息，点击确定， 以此来 完成订单受理操作。



6 .2.5 修改个人密码
( 1 )  描述：输入用户名和用户的原有密码，击修改按钮 后 输入新密码可修改密码成功。
( 2 )  程序效果图如图 6 . 9 所示 。

图 6 . 9 修改密码
Fig 6. 9  change passwords

6 .3 普通用户模块
6 .3.1 系统主页面实现
( 1 )  描述：页面的上方显示的是该网站的 标题 ，下方主要部分是信息显示区域，左侧上部分是菜单分类信息， 下部分是联系我们， 点击 类别名称可以 链接到改类别下的菜单信息。
( 2 )  程序运行效果图如图 6 . 10 所示 。

图 6 . 10   系统主页面设计
Fig 6.10 system home page design
6 .3. 2 会员注册模块
( 1 )  描述： 系统中，游客可以查看菜单，但是必须注册成为会员，才能进行在线下单，点餐。通过点击注册按钮，使用 js 调用 open （） 方法，弹出注册页面，填写注册的现骨干信息，点击提交，提交给后台 action 进行注册信息检测，如果通过检测，那就注册成功，如果没有通过检测，注册失败。
( 2 )  程序效果图如图 6.11 所示 。

图 6 . 11 用户注册界面设计
Figure 6.11 registered user interface design

6 .3.4 用户点餐 模块
( 1 )  描述：用户注册账号并成功登录 系统 后，通过主页按菜单类别找到想要点餐的菜单，点击 确认 ，打开菜单 浏览详细 信息界面，浏览菜单的具体信息， 点餐方法， 输入点餐数量，点击点餐按钮， 点击确认， 完成菜单点餐操作。
( 2 )  程序效果图如图 6 . 12 所示。

图 6 . 12 点餐菜单
Fig 6.12 order menu

6 .3.5 点餐管理
( 1 )  描述：和超市点餐一样，用户点餐的菜单暂时存放在点餐单中，点击菜单中的"我的 点餐单 "，即可查看当用户点餐单中的内容 。
( 2 )  程序效果图如图 6 . 13 所示。

图 6 . 13 点餐单管理
Fig 6.13 menu management

